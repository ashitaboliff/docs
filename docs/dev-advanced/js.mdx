---
sidebar_position: 1
---

import Figure from '@site/src/components/Figure'

# 1. JavaScriptについて

JavaScriptの大まかな説明は[以前](../web-development/js.mdx)で行いましたが、ここではもう少し発展的な内容を説明します。

## 1.1 JavaScriptの実行環境
プログラミング言語には大抵**実行環境**というものがあります。
読んで字のごとく、プログラムを実行するための環境であり、JavaScriptではランタイムとも呼ばれます。

モダンなWeb開発では以下の3つの実行環境が主に使われています。
- **クライアント(ブラウザ)**: Webページ上でJavaScriptを実行するための環境。
  DOM操作やイベント処理など、Webページの動的な挙動を実現するために使用される
- **サーバー**: サーバーサイドでJavaScriptを実行するための環境。
  ファイル操作やネットワーク通信など、ウェブブラウザでは制限されている機能にアクセス可能。Node.jsってアプリケーションが多いけどDenoとかBunもあるよー
- **エッジ**: Cloudflare WorkersやVercel Edge Functionsなど、CDN(コンテンツ配信ネットワーク)上でJavaScriptを実行するための環境。
  高速なレスポンスが求められる場面で利用されることが多い

各実行環境は以上のように異なる特徴と用途を持っています。
基本的に、これら実行環境は別々の開発環境を用意して用いますが、Next.jsではこれを統合して扱います。  
そのための境界線として**サーバーサイド**と**クライアントサイド**という概念があり、**クライアントサイド**は`'use client'`ディレクティブで明示的に指定します。

:::tip
**ディレクティブ**とか言われても難しいと思いますが、んまあなんかそういう概念です。 モード切替みたいな  
JavaScriptには元々「厳格モード」として`'use strict'`というディレクティブがあります。
:::

[Next.jsとは](../web-development/next)でも`useState`を使うために`'use client'`というディレクティブが出てきていましたが、あの例のように
- `useState`や`useEffect`などのイベント処理、DOM操作を伴うことの多い**Reactフック**を使う場合
- `onClick`や`onChange`などのユーザー操作に応じた動的な挙動を実装する場合
- ブラウザのAPI(例えば`window`や`document`オブジェクト)を使用する場合

はクライアントサイドで実行されるため、`'use client'`をファイルの先頭に記述する必要があります。

:::info
というかそもそもJavaScriptやReactはクライアントサイド(Webブラウザ上)で動かすための技術で、それを拡張しサーバーサイドで動かすようになったのが今です。
:::

## 1.2 Next.jsのサーバーサイド
Next.jsでは、サーバーサイドで実行されるコードは特に指定しなくてもサーバーサイドとして扱われます。
例えば、`app/page.tsx`のようなページコンポーネントはデフォルトでサーバーサイドで実行されます。
この知識をもとに、Next.jsのベストプラクティス(最適解)を見てみましょう。

:::warning 注意
ここからは[環境構築](../category/setup/)がすべて終わっている段階を想定した説明になっています。もし終わってなかったら終わらせてね！
:::
